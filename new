<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ page import="java.sql.*,com.crud.Emp,java.util.*" %>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<form method="GET">
    id : <input type="text" id="id" name="id"/><br><br>
    Name : <input type="text" id="name" name="name"/><br><br>
    department : <input type="text" id="dept" name="dept"/><br><br>
    Salary : <input type="text" id="sal" name="sal"/><br><br>
    <button type="submit" name="mode" value="first">First</button>
    <button type="submit" name="mode" value="last">Last</button>
    <button type="submit" name="mode" value="previous">previous</button>
    <button type="submit" name="mode" value="next">next</button><br><br>
    <button type="submit" name="mode" value="edit">edit</button>
    <button type="submit" name="mode" value="add">Add</button>
    <button type="submit" name="mode" value="delete">Delete</button><br><br>
    <button type="submit" name="mode" value="exit">exit</button>
    <button type="submit" name="mode" value="clear">clear</button>
    <button type="submit" name="mode" value="search">search</button>
</form>
<% 
int id = 0;
String name = null, dept = null;
double sal = 0;
HttpSession hs = request.getSession(); 
int curLine = 0;
Connection c = null;
PreparedStatement st = null;
ArrayList<Emp> al = new ArrayList<Emp>();
ArrayList<Emp> all = new ArrayList<Emp>();
try {
    Class.forName("org.postgresql.Driver");
    c = DriverManager.getConnection("jdbc:postgresql://localhost:5432/postgres", "postgres", "1234");
    st = c.prepareStatement("select * from emplo");
    ResultSet rs = st.executeQuery();
    if(rs.next()) {
        id = rs.getInt(1);
        name = rs.getString(2);
        dept = rs.getString(3);
        sal = rs.getDouble(4);
        Emp e = new Emp(id, name, dept, sal);
        al.add(e);
    }
    while(rs.next()){
         int iid = rs.getInt(1);
         String nname = rs.getString(2);
         String ddept = rs.getString(3);
         double ssal = rs.getDouble(4);
         Emp e = new Emp(iid, nname, ddept, ssal);
         all.add(e);
    }
} catch (Exception e) {
    System.out.println("error");
}

Integer sessionCurLine = (Integer) hs.getAttribute("curLine");
if (sessionCurLine != null) {
    curLine = sessionCurLine;
}
String mode = request.getParameter("mode");

if (mode != null && mode.equals("first")) {
    if (!all.isEmpty()) {
        curLine = 0;
        hs.setAttribute("curLine", curLine);
        Emp firstEmp = al.get(0);
        id = firstEmp.getId();
        name = firstEmp.getName();
        dept = firstEmp.getDept();
        sal = firstEmp.getSal();
    }
}

if (mode != null && mode.equals("last")) {
    if (!all.isEmpty()) {
        curLine = all.size() - 1;
        hs.setAttribute("curLine", curLine);
        Emp lastEmp = all.get(all.size() - 1);
        id = lastEmp.getId();
        name = lastEmp.getName();
        dept = lastEmp.getDept();
        sal = lastEmp.getSal();
    }
}

if (mode != null && mode.equals("previous")) {
    if (!all.isEmpty() && curLine > 0) {
        curLine -= 1;
        hs.setAttribute("curLine", curLine);
    }
    Emp prevEmp = all.get(curLine);
    id = prevEmp.getId();
    name = prevEmp.getName();
    dept = prevEmp.getDept();
    sal = prevEmp.getSal();
}

if (mode != null && mode.equals("next")) {
    if (!all.isEmpty() && curLine < all.size() - 1) {
        curLine += 1;
        hs.setAttribute("curLine", curLine);
    }
    Emp nextEmp = all.get(curLine);
    id = nextEmp.getId();
    name =nextEmp.getName();
    dept = nextEmp.getDept();
    sal = nextEmp.getSal();
}

System.out.println(curLine);

%>
<script>
var a = document.getElementById("id");
var b = document.getElementById("name");
var c = document.getElementById("dept");
var d = document.getElementById("sal");
a.value = "<%= id %>";
b.value = "<%= name %>";
c.value = "<%= dept %>";
d.value = "<%= sal %>";
</script>
</body>
</html>
-------------------------------------------------------------------------------
package com.crud;

public class Emp {
	int id;
	String name,dept;
	double sal;
	public Emp(int id, String name, String dept, double sal) {
		super();
		this.id = id;
		this.name = name;
		this.dept = dept;
		this.sal = sal;
	}
	public int getId() {
		return id;
	}
	public void setId(int id) {
		this.id = id;
	}
	public String getName() {
		return name;
	}
	public void setName(String name) {
		this.name = name;
	}
	public String getDept() {
		return dept;
	}
	public void setDept(String dept) {
		this.dept = dept;
	}
	public double getSal() {
		return sal;
	}
	public void setSal(double sal) {
		this.sal = sal;
	}
	
}
